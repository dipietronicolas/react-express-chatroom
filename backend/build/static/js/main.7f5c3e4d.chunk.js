(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){},143:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(8),o=n.n(r),l=(n(82),n(83),n(84),n(6)),i=n(62),s=n.n(i)()("http://127.0.0.1:4001"),u=c.a.createContext(),m=function(e){var t=e.children,n=Object(a.useState)([]),r=Object(l.a)(n,2),o=r[0],i=r[1],m=Object(a.useState)(null),d=Object(l.a)(m,2),f=d[0],p=d[1];Object(a.useEffect)(function(){s.on("usernames",function(e){i(e)})},[]);return c.a.createElement(u.Provider,{value:{usernames:o,newUser:function(e){s.emit("new_user",e),s.on("usernames",function(e){i(e)})},sendMessage:function(e){s.emit("send_message",{msg:e,type:"text"}),s.on("send_msg",function(e){p(e)})},updateUser:function(e){s.emit("update_user",e),s.on("usernames",function(e){i(e)})},sendPicture:function(e){s.emit("send_message",{msg:e.picture,type:"higher"===e.type?"higher_picture":"wider_picture"}),s.on("send_msg",function(e){p(e)})},message:f}},t)},d=(n(111),n(174)),f=n(177),p=n(179),v=n(183),b=n(180),h=Object(d.a)(function(e){return{root:{padding:0,width:"100%",maxWidth:360}}}),E=function(){var e=h(),t=Object(a.useContext)(u).usernames;return c.a.createElement("div",{className:"Chatroom-username-container"},c.a.createElement("div",{className:"Chatroom-username"},c.a.createElement("p",{className:"Chatroom-username-title"},"Users list"),c.a.createElement(f.a,{component:"nav",className:e.root,"aria-label":"mailbox folders"},t.length>0&&t.map(function(e,t){return c.a.createElement(p.a,{button:!0,key:t},c.a.createElement("i",{className:"fas fa-user-circle Chatroom-username-icon"}),c.a.createElement(v.a,{primary:e}),c.a.createElement(b.a,null))}))))},g=(n(116),function(e){var t=e.handleSetPicture,n=Object(a.useRef)(null),r=Object(a.useState)(null),o=Object(l.a)(r,2),i=o[0],s=o[1];return c.a.createElement("div",{className:"SendPictureContainer"},c.a.createElement("input",{ref:n,type:"file",accept:"image/*",className:"SendPicture-upload",onChange:function(e){if(e.target.files[0]&&e.target.files[0].size<999999){var a=e.target.files[0],c=window.URL||window.webkitURL,r=new Image;r.src=c.createObjectURL(e.target.files[0]),r.onload=function(){this.height>this.width?t({picture:a,type:"higher"}):t({picture:a,type:"wider"})},r.onerror=function(){alert("not a valid file")},document.querySelector(".SendPicture-upload-button").style.color="green"}else s("Image max size must be 1 MB"),setTimeout(function(){document.querySelector(".alert-err").style.opacity=0,setTimeout(function(){s(null)},500)},7e3);n.current.value=null},style:{display:"none"}}),c.a.createElement("button",{onClick:function(){n.current.click()},className:"SendPicture-upload-button"},c.a.createElement("i",{className:"fas fa-image"}),c.a.createElement("p",{className:"SendPicture-upload-text"},"Upload picture")),i&&c.a.createElement("div",{className:"alert-err"},i))}),y=(n(117),function(e){var t=e.handleInputContainer,n=Object(a.useRef)(null);return c.a.createElement("div",{className:"Chatroom-input-container"},c.a.createElement("form",{className:"Chatroom-form",onSubmit:function(e){e.preventDefault(),n.current.value&&t(n.current.value),n.current.value="",document.querySelector(".Chatroom-input").focus()}},c.a.createElement("input",{ref:n,className:"Chatroom-input",type:"text",maxLength:"80",minLength:"1",name:"message",autoFocus:!0}),c.a.createElement("button",{className:"Chatroom-send-btn"},"Send")))}),P=n(67),O=(n(133),function(e){var t=e.handleSendPicture,n=e.picURL,r=e.picType,o=Object(a.useState)(null),i=Object(l.a)(o,2),s=i[0],u=i[1],m=Object(a.useState)(0),d=Object(l.a)(m,2),f=d[0],p=d[1],v=Object(a.useState)(0),b=Object(l.a)(v,2),h=b[0],E=b[1],g=Object(a.useState)(0),y=Object(l.a)(g,2),P=y[0],O=y[1],j=Object(a.useState)(0),w=Object(l.a)(j,2),N=w[0],C=w[1],S=Object(a.useState)(0),x=Object(l.a)(S,2),U=x[0],L=x[1],k=Object(a.useState)(0),R=Object(l.a)(k,2),T=R[0],I=R[1],q=Object(a.useState)(0),M=Object(l.a)(q,2),B=M[0],H=M[1],_=Object(a.useState)(!0),F=Object(l.a)(_,2),A=F[0],D=F[1],X=Object(a.useState)(!1),Y=Object(l.a)(X,2),W=Y[0],z=Y[1];Object(a.useEffect)(function(){console.log("re-render")}),Object(a.useEffect)(function(){u(document.querySelector(".selection-container"))},[]),Object(a.useEffect)(function(){},[s]);var J=function(){console.log("tagSelection");var e=document.getElementById("selection#0".concat(B));if(e){var t=document.createElement("input");console.log("\n        div.style.height = ".concat(e.style.height,"\n        div.style.width = ").concat(e.style.width,"\n        div.style.top = ").concat(e.style.top,"\n        div.style.left = ").concat(e.style.left,"\n      ")),t.type="text",t.autofocus=!0,t.classList.add("tag-input"),t.id="input#0".concat(B),e.classList.add("test-with-tag"),e.appendChild(t),D(!1)}};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"PictureTag"},c.a.createElement("img",{src:n,alt:"picPreview",className:"higher"===r?"PicturePreview-img-typeA":"PicturePreview-img-typeB"}),c.a.createElement("div",{onMouseDown:function(e){A&&(console.log("mousedown"),console.log(e),p(e.nativeEvent.layerX),E(e.nativeEvent.layerY),L(e.target.clientWidth),I(e.target.clientHeight),H(B+1),z(!0))},onMouseMove:function(e){if(W){O(e.nativeEvent.layerX),C(e.nativeEvent.layerY);var t=document.getElementById("selection#0".concat(B));t&&t.remove();var n=document.createElement("div");if(n.classList.add("test"),n.id="selection#0".concat(B),P-f>=0&&N-h>=0){var a=P-f,c=N-h;n.style.height="".concat(c,"px"),n.style.width="".concat(a,"px"),n.style.top="".concat(h,"px"),n.style.left="".concat(f,"px"),console.log("\n          recA\n          ladoX = ".concat(a,"\n          ladoY = ").concat(c,"\n        "))}else if(P-f<=0&&N-h>=0){var r=f-P,o=N-h;n.style.height="".concat(o,"px"),n.style.width="".concat(r,"px"),n.style.top="".concat(h,"px"),n.style.right="".concat(U-f,"px"),console.log("\n          recB\n          ladoX = ".concat(r,"\n          ladoY = ").concat(o,"\n        "))}else if(P-f>=0&&h-N>=0){var l=P-f,i=h-N;n.style.height="".concat(i,"px"),n.style.width="".concat(l,"px"),n.style.bottom="".concat(T-h,"px"),n.style.left="".concat(f,"px"),console.log("\n          recC\n          ladoX = ".concat(l,"\n          ladoY = ").concat(i,"\n        "))}else if(P-f<=0&&h-N>=0){var u=f-P,m=h-N;n.style.height="".concat(m,"px"),n.style.width="".concat(u,"px"),n.style.bottom="".concat(T-h,"px"),n.style.right="".concat(U-f,"px"),console.log("\n          recD\n          ladoX = ".concat(u,"\n          ladoY = ").concat(m,"\n\n          x_secondPosition = ").concat(P,"\n          y_secondPosition = ").concat(N,"\n        "))}s.appendChild(n)}},onMouseUp:function(e){console.log("mouseUp"),z(!1),document.querySelector(".test")&&!0===A&&J()},className:"selection-container"})),c.a.createElement("div",{className:"PicturePreview-buttons-container"},c.a.createElement("button",{className:"PicturePreview-button PicturePreview-accept",onClick:function(){var e=document.getElementById("input#0".concat(B));e&&e.classList.add("test-finished"),D(!0)}},c.a.createElement("i",{className:"fas fa-check"}),c.a.createElement("p",{className:"PicturePreview-send-button-text PicturePreview-accept"},"Accept tag")),c.a.createElement("button",{className:"PicturePreview-button PicturePreview-delete",onClick:function(){var e=document.getElementById("selection#0".concat(B));console.log(B),e&&e.remove(),B>0&&H(B-1)}},c.a.createElement("i",{className:"far fa-times-circle"}),c.a.createElement("p",{className:"PicturePreview-send-button-text PicturePreview-delete"},"Delete last tag")),c.a.createElement("button",{onClick:t,className:"PicturePreview-button PicturePreview-send"},c.a.createElement("i",{className:"fas fa-file-import"}),c.a.createElement("p",{className:"PicturePreview-send-button-text PicturePreview-send"},"Send picture"))))}),j=(n(134),function(e){var t=e.picture,n=e.type,r=e.handleSetPicture,o=Object(a.useContext)(u).sendPicture,i=Object(a.useState)(null),s=Object(l.a)(i,2),m=s[0],d=s[1],f=Object(a.useState)(null),p=Object(l.a)(f,2),v=p[0],b=p[1],h=Object(a.useState)(null),E=Object(l.a)(h,2);E[0],E[1];Object(a.useEffect)(function(){var e=(window.URL||window.webkitURL).createObjectURL(t);d(e),b(n)},[t]);return c.a.createElement("div",{className:"PicturePreview-container"},c.a.createElement("h2",{className:"PicturePreview-title"},"Click to draw a square and tag people"),t&&c.a.createElement(O,{handleSendPicture:function(){m&&(o({picture:t,type:n}),r(null),document.querySelector(".SendPicture-upload-button").style.color="rgb(150,150,150)")},picURL:m,picType:v}))}),w=(n(135),function(){var e=Object(a.useContext)(u),t=e.sendMessage,n=e.message,r=Object(a.useState)(null),o=Object(l.a)(r,2),i=o[0],s=o[1],m=function(e){s(e)},d=function(){if(n){var e=document.querySelector(".Chatroom-chat").firstChild.firstChild;"text"===n.type?e.innerHTML+='\n        <div class="Chatroom-chat-name-message">\n          <div class="Chatroom-chat-name-container" style="color: '.concat(n.color,'">').concat(n.username,'</div>\n          <div class="Chatroom-chat-message-container">').concat(n.msg,"</div>\n        </div>\n        "):e.innerHTML+='\n        <div class="Chatroom-chat-name-message">\n          <div class="Chatroom-chat-name-container" style="color: '.concat(n.color,'">').concat(n.username,"</div>\n          ").concat(function(e){var t=e.msg,n=e.type,a=new Uint8Array(t),c=new Blob([a],{type:"image/jpeg"}),r=(window.URL||window.webkitURL).createObjectURL(c);return"\n      <img class=".concat("higher_picture"===n?"Chatroom-chat-img-container-typeHigher":"Chatroom-chat-img-container-typeWider"," \n        src=").concat(r,' alt="picsend"/>\n    ')}(n),"\n        </div>\n        ")}};return Object(a.useEffect)(function(){d()},[n]),c.a.createElement("div",{className:"Chatroom-message"},c.a.createElement("button",{onClick:function(){var e=document.querySelector(".UserProfile-container");e.classList.toggle("UserProfile-show"),e.classList.contains("UserProfile-show")||document.querySelector(".Chatroom-input").focus()},className:"Userprofile-show-button"},"Settings"),c.a.createElement("div",{className:"Chatroom-chat"},c.a.createElement(P.Scrollbars,{ref:function(e){e&&setTimeout(function(){e.scrollToBottom()},50)},autoHide:!0,autoHideTimeout:1500,autoHideDuration:500}),i&&c.a.createElement(j,{picture:i.picture,type:i.type,handleSetPicture:m})),c.a.createElement(g,{handleSetPicture:m}),c.a.createElement(y,{handleInputContainer:function(e){t(e)}}))}),N=c.a.createContext(),C=function(e){var t=e.children,n=Object(a.useContext)(u).usernames,r=Object(a.useState)(""),o=Object(l.a)(r,2),i=o[0],s=o[1];return c.a.createElement(N.Provider,{value:{username:i,addUsername:function(e,t){n.includes(e)?(t(!1),console.log("No esta disponible")):(s(e),t(!0))}}},t)},S=(n(136),n(137),function(){var e=Object(a.useRef)(null),t=Object(a.useContext)(N),n=t.username,r=t.addUsername,o=Object(a.useContext)(u).updateUser,i=Object(a.useState)(!1),s=Object(l.a)(i,2),m=s[0],d=s[1],f=Object(a.useState)(""),p=Object(l.a)(f,2),v=p[0],b=p[1],h=function(){d(!1),document.querySelector(".UserProfile-edit-button").style.display="block"};return c.a.createElement("div",{className:"UserProfile-container"},c.a.createElement("div",{className:"UserProfile"},c.a.createElement("div",{className:"UserProfile-username-container"},c.a.createElement("div",{className:"UserProfile-img-container"},c.a.createElement("i",{className:"far fa-user-circle"})),c.a.createElement("div",{className:"UserProfile-edit"},m?c.a.createElement("div",{className:"UserProfile-editInputContainer"},c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.current.value&&(r(e.current.value,function(t){t?o(e.current.value):b("Username not available")}),h())}},c.a.createElement("input",{className:"UserProfile-edit-input",type:"text",ref:e,maxLength:"30",minLength:"2",autoFocus:!0}),c.a.createElement("button",{className:"UserProfile-edit-input-button"},c.a.createElement("i",{className:"fas fa-check"}))),c.a.createElement("button",{onClick:h,className:"UserProfile-edit-input-cancel-button"},c.a.createElement("i",{className:"fas fa-times"}))):c.a.createElement("p",{className:"UserProfile-username"},n),c.a.createElement("button",{className:"UserProfile-edit-button",onClick:function(){b(null),d(!0),document.querySelector(".UserProfile-edit-button").style.display="none"}},c.a.createElement("i",{className:"fas fa-edit"})))),v&&c.a.createElement("div",{className:"alert"},v)))}),x=(n(140),function(){return c.a.createElement("div",{className:"Chatroom"},c.a.createElement(E,null),c.a.createElement(w,null),c.a.createElement(S,null))}),U=function(){return c.a.createElement("div",{className:"Chatroom-container"},c.a.createElement(x,null))},L=(n(141),n(182)),k=n(181),R=Object(d.a)(function(e){return{button:{padding:e.spacing(2)}}}),T=function(){var e=Object(a.useContext)(N).addUsername,t=Object(a.useContext)(u).newUser,n=Object(a.useState)(null),r=Object(l.a)(n,2),o=r[0],i=r[1],s=R(),m=Object(a.useRef)(null);return c.a.createElement("div",{className:"Home"},c.a.createElement("form",{className:"Home-form",onSubmit:function(n){n.preventDefault(),m.current.value&&e(m.current.value,function(e){e?t(m.current.value):i("Username not available")})}},c.a.createElement("div",{className:"Home-title-coontainer"},c.a.createElement("h2",null,"WELLCOME TO FANTASTIC CHAT!"),c.a.createElement("p",null,"Type your username")),o&&c.a.createElement("div",{className:"alert-error"},o),c.a.createElement(L.a,{id:"standard-basic",label:"Username",inputRef:m,autoFocus:!0}),c.a.createElement(k.a,{type:"submit",className:s.button,variant:"contained",color:"primary"},"CONFIRM")))};var I=function(){var e=Object(a.useContext)(N).username;return c.a.createElement("div",{className:"App"},e?c.a.createElement(U,null):c.a.createElement(T,null))},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,185)).then(function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)})};o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(m,null,c.a.createElement(C,null,c.a.createElement(I,null)))),document.getElementById("root")),q()},77:function(e,t,n){e.exports=n(143)},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){}},[[77,1,2]]]);
//# sourceMappingURL=main.7f5c3e4d.chunk.js.map